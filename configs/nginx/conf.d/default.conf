# =============================================================================
# AI 明信片项目 - Nginx 默认站点配置
# =============================================================================
# 此文件被主配置文件包含，提供更细致的配置管理
# =============================================================================

# 重定向所有非API请求到API文档或状态页面
server {
    listen 80;
    server_name localhost;
    
    # 根路径返回API状态信息
    location = / {
        return 200 '{
            "service": "AI Postcard Gateway",
            "version": "1.0.0",
            "status": "running",
            "endpoints": {
                "api": "/api/v1/",
                "health": "/health",
                "ai_agent": "/ai-agent/"
            },
            "documentation": "https://github.com/your-org/ai-postcard"
        }';
        add_header Content-Type "application/json; charset=utf-8";
        add_header Access-Control-Allow-Origin "*";
    }
    
    # API版本信息
    location = /version {
        return 200 '{"version":"1.0.0","build_date":"2025-09-03"}';
        add_header Content-Type "application/json; charset=utf-8";
    }
    
    # 机器人和爬虫管理
    location = /robots.txt {
        return 200 "User-agent: *\nDisallow: /api/\nDisallow: /ai-agent/\nAllow: /health\n";
        add_header Content-Type "text/plain; charset=utf-8";
    }
    
    # Favicon处理
    location = /favicon.ico {
        access_log off;
        log_not_found off;
        return 404;
    }
}