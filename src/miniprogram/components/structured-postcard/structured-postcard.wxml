<!-- ç»“æ„åŒ–æ˜ä¿¡ç‰‡ç»„ä»¶æ¨¡æ¿ -->
<view class="structured-postcard-container">
  <!-- ä¸»å¡ç‰‡ -->
  <view 
    class="postcard-main {{isAnimating ? 'animated' : ''}}"
    style="{{dynamicCardStyle}}"
    animation="{{animationData}}"
    bindtap="onCardTap"
  >
    <!-- èƒŒæ™¯å›¾ç‰‡å±‚ -->
    <image 
      class="background-image" 
      src="{{backgroundImage}}" 
      mode="aspectFill"
      lazy-load="true"
      wx:if="{{backgroundImage}}"
    ></image>
    
    <!-- å†…å®¹å±‚ -->
    <view class="content-layer" style="{{dynamicContentStyle}}">
      <!-- æ ‡é¢˜å’Œæƒ…ç»ª -->
      <view class="header-section">
        <text class="card-title">{{structuredData.title || 'ä»Šæ—¥å¿ƒæƒ…'}}</text>
        <view class="mood-indicator" wx:if="{{structuredData.mood}}">
          <text class="mood-primary">{{structuredData.mood.primary}}</text>
          <text class="mood-intensity" wx:if="{{structuredData.mood.intensity}}">
            {{getMoodIntensityStars(structuredData.mood.intensity)}}
          </text>
        </view>
      </view>
      
      <!-- ä¸»è¦æ–‡æ¡ˆ -->
      <view class="main-content-section">
        <text class="main-text">{{structuredData.content.main_text}}</text>
      </view>
      
      <!-- çƒ­ç‚¹è¯é¢˜ -->
      <view class="hot-topics-section" wx:if="{{structuredData.content.hot_topics}}">
        <view class="topic-item" wx:if="{{structuredData.content.hot_topics.xiaohongshu}}">
          <text class="topic-text">{{structuredData.content.hot_topics.xiaohongshu}}</text>
        </view>
        <view class="topic-item" wx:if="{{structuredData.content.hot_topics.douyin}}">
          <text class="topic-text">{{structuredData.content.hot_topics.douyin}}</text>
        </view>
      </view>
      
      <!-- è‹±æ–‡æµ®æ¡ï¼ˆå¤šæ¥æºå…œåº•ï¼‰ -->
      <view class="quote-section" wx:if="{{hasQuote}}">
        <text class="quote-text">{{quoteText}}</text>
        <text class="quote-author" wx:if="{{quoteAuthor}}">â€” {{quoteAuthor}}</text>
        <text class="quote-translation" wx:if="{{quoteTranslation}}">{{quoteTranslation}}</text>
      </view>
      
      <!-- æ¨èå†…å®¹ -->
      <view class="recommendations-section" wx:if="{{structuredData.recommendations}}">
        <view class="recommendations-header" bindtap="toggleRecommendations">
          <text class="recommendations-title">ä»Šæ—¥æ¨è</text>
          <text class="expand-icon {{recommendationsExpanded ? 'expanded' : ''}}">â–¼</text>
        </view>
        
        <view class="recommendations-content {{recommendationsExpanded ? 'expanded' : ''}}">
          <!-- éŸ³ä¹æ¨è -->
          <view 
            class="recommendation-item music" 
            wx:if="{{hasMusic}}"
            data-type="music"
            data-item="{{recMusic}}"
            bindtap="onRecommendationTap"
          >
            <text class="rec-icon">ğŸµ</text>
            <view class="rec-content">
              <text class="rec-title">{{recMusic.title}}</text>
              <text class="rec-subtitle">{{recMusic.artist}}</text>
              <text class="rec-reason">{{recMusic.reason}}</text>
            </view>
          </view>
          
          <!-- ä¹¦ç±æ¨è -->
          <view 
            class="recommendation-item book" 
            wx:if="{{hasBook}}"
            data-type="book"
            data-item="{{recBook}}"
            bindtap="onRecommendationTap"
          >
            <text class="rec-icon">ğŸ“š</text>
            <view class="rec-content">
              <text class="rec-title">{{recBook.title}}</text>
              <text class="rec-subtitle">{{recBook.author}}</text>
              <text class="rec-reason">{{recBook.reason}}</text>
            </view>
          </view>
          
          <!-- ç”µå½±æ¨è -->
          <view 
            class="recommendation-item movie" 
            wx:if="{{hasMovie}}"
            data-type="movie"
            data-item="{{recMovie}}"
            bindtap="onRecommendationTap"
          >
            <text class="rec-icon">ğŸ¬</text>
            <view class="rec-content">
              <text class="rec-title">{{recMovie.title}}</text>
              <text class="rec-subtitle">{{recMovie.director}}</text>
              <text class="rec-reason">{{recMovie.reason}}</text>
            </view>
          </view>
        </view>
      </view>
      
      <!-- åº•éƒ¨ä¿¡æ¯ï¼šå»æ‰åœ°ç‚¹/å¤©æ°”ï¼Œä»…ä¿ç•™åˆ†äº« -->
      <view class="footer-section">
        <view class="share-button" bindtap="shareCard">
          <text class="share-icon">âœ¨</text>
          <text class="share-text">åˆ†äº«å¿ƒæƒ…</text>
        </view>
      </view>
    </view>
    
    <!-- è£…é¥°æ€§åŠ¨æ•ˆå±‚ -->
    <view class="decoration-layer" wx:if="{{showGradientAnimation}}">
      <view class="gradient-overlay"></view>
    </view>
  </view>
</view>
