<!-- hanging-charm.wxml - üîÆ ÊåÇ‰ª∂ÂºèÂøÉË±°Á≠æÁªÑ‰ª∂Ê®°Êùø -->

<!-- Á¨¨1Â±ÇÔºöÈÄèËßÜÂÆπÂô® -->
<view class="charm-scene" style="{{containerStyle}}">
  
  <!-- Á¨¨2Â±ÇÔºöÁøªËΩ¨ÊéßÂà∂Âô® -->
  <view class="charm-flipper {{isFlipped ? 'flipped' : ''}}" animation="{{animationData}}" bindtap="onCharmTap" hover-class="none">
    
    <!-- Á¨¨3Â±ÇÔºöÊ≠£Èù¢ÂÆπÂô® - ÊåÇ‰ª∂ÂΩ¢Âºè -->
    <view class="charm-face charm-face-front">
      
      
      <!-- ÊåÇ‰ª∂ÂõæÁâáÂ±Ç -->
      <view class="charm-container">
        <image 
          class="charm-image" 
          src="{{charmImagePath}}" 
          mode="aspectFit"
          wx:if="{{charmImagePath}}"
        ></image>
        
        <!-- ÈªòËÆ§ÊåÇ‰ª∂ÂΩ¢Áä∂ÔºàÂΩìÊ≤°ÊúâÂõæÁâáÊó∂Ôºâ -->
        <view class="charm-default-shape" wx:else></view>
        
        <!-- ÊåÇ‰ª∂ÂÜÖÂÆπË¶ÜÁõñÂ±Ç -->
        <view class="charm-content-overlay">
          
          <!-- üîÆ Â∑¶‰∏äËßíÁ´ñÊéíÁ≠æÂêç -->
          <view class="charm-name-vertical" wx:if="{{charmNameChars.length}}" 
                style="color: {{oracleData.charm_main_color || charmMainColor || '#2D3748'}};">
            <text 
              class="name-char" 
              wx:for="{{charmNameChars}}" 
              wx:for-index="idx" 
              wx:key="idx"
            >{{item}}</text>
          </view>
          
          <!-- ÁßªÈô§‰∏≠Èó¥Ë£ÖÈ•∞Âå∫ÂüüÔºå‰øùÊåÅÁ≠æ‰ΩìÁÆÄÊ¥Å -->
          
          <!-- ÁÆÄÂåñÂÜÖÂÆπÔºåÂè™‰øùÁïôÁ≠æÂêçÂíåÁÆÄË¶ÅÁ•ùÁ¶è -->
          
          <!-- ÁÆÄË¶ÅÁ•ùÁ¶è -->
          <view class="charm-blessing" wx:if="{{oracleData.charm_blessing}}" style="color: {{oracleData.charm_main_color || '#8B7355'}};">
            {{oracleData.charm_blessing}}
          </view>
          
        </view>
        
        <!-- ÊåÇ‰ª∂Ë£ÖÈ•∞ÊïàÊûú - ‰øùÁïôsparkleÈó™ÁÉÅÂ¢ûÂä†ÁÅµÂä®ÊÑü -->
        <view class="charm-decoration" wx:if="{{showAnimation}}">
          <view class="charm-sparkle charm-sparkle-1"></view>
          <view class="charm-sparkle charm-sparkle-2"></view>
          <view class="charm-sparkle charm-sparkle-3"></view>
        </view>
        
      </view>
      
      <!-- ÁøªÈù¢ÊèêÁ§∫ -->
      <view class="flip-hint-charm">
        <text class="flip-hint-icon">‚Üª</text>
        <text class="flip-hint-text">Êü•ÁúãËß£Á≠æ</text>
      </view>
      
    </view>
    
    <!-- Á¨¨3Â±ÇÔºöËÉåÈù¢ÂÆπÂô® - Ëß£Á≠æÁ¨∫ÂΩ¢Âºè -->
    <view class="charm-face charm-face-back">
      
      <!-- Ëß£Á≠æÁ¨∫ÂÆπÂô® - Á´ñÊéíÂ∏ÉÂ±Ä -->
      <view class="interpretation-scroll-vertical {{showInterpretation ? 'visible' : ''}}">
        
        <!-- ËÉåÊôØÂõæÁâáÂ±Ç -->
        <view 
          class="scroll-background-image" 
          wx:if="{{backgroundImage || oracleData.visual_background_image || oracleData.image_url}}"
          style="background-image: url({{backgroundImage || oracleData.visual_background_image || oracleData.image_url}});"
        ></view>
        
        <!-- ÁÆÄÂåñËÉåÈù¢ÂÜÖÂÆπ - Âè™‰øùÁïôÁ©∫ÁôΩÂå∫Âüü‰Ωú‰∏∫Âç†‰Ωç -->
        <view class="simplified-back-content">
          
          <!-- Ëß£Á≠æÁ¨∫Á´ñÊéíÊñáÂ≠ó -->
          <view class="oracle-label-back">
            <text class="oracle-char-back">Ëß£</text>
            <text class="oracle-char-back">Á≠æ</text>
            <text class="oracle-char-back">Á¨∫</text>
            <view class="oracle-line-back"></view>
          </view>
          
          <!-- Á∫¢Ëâ≤Ê°ÜÂå∫ÂüüÔºöÁ´ñÊéíÊñáÂ≠óÂÜÖÂÆπ -->
          <view class="oracle-content-vertical">
            <!-- Âç¶Ë±°ÂêçÁß∞ÂíåÊ¥ûÂØü -->
            <view class="oracle-column" wx:if="{{extractedOracleData.oracle_hexagram_name || extractedOracleData.oracle_hexagram_insight}}">
              <text class="oracle-text" wx:if="{{extractedOracleData.oracle_hexagram_insight}}">{{extractedOracleData.oracle_hexagram_insight}}</text>
            </view>
            
            <!-- ÁîüÊ¥ªÊåáÂºï -->
            <view class="oracle-column" wx:if="{{extractedOracleData.oracle_daily_guides && extractedOracleData.oracle_daily_guides.length > 0}}">
              <block wx:for="{{extractedOracleData.oracle_daily_guides}}" wx:key="index">
                <text class="oracle-text">{{item}}</text>
              </block>
            </view>
            
            <!-- È£éÊ∞¥Âíå‰ª™ÂºèÂª∫ËÆÆ -->
            <view class="oracle-column" wx:if="{{extractedOracleData.oracle_fengshui_focus || extractedOracleData.oracle_ritual_hint}}">
              <text class="oracle-text" wx:if="{{extractedOracleData.oracle_fengshui_focus}}">{{extractedOracleData.oracle_fengshui_focus}}</text>
              <text class="oracle-text" wx:if="{{extractedOracleData.oracle_ritual_hint}}">{{extractedOracleData.oracle_ritual_hint}}</text>
            </view>
          </view>
          
        </view>
        
        <!-- Â∫ïÈÉ®Âå∫Âüü - ÁÆÄÂåñÁâà -->
        <view class="scroll-footer-vertical">

          <!-- Ë¥£‰ªªËØ¥ÊòéÔºàÂ∫ïÈÉ®ÊòæÁ§∫Ôºâ -->
          <view class="disclaimer-bottom">
            <text class="disclaimer-text-small">{{oracleData.oracle_culture_note || 'ÁÅµÊÑüÊ∫êËá™‰º†ÁªüÊñáÂåñÂêØËø™Ôºå‰∏ç‰ΩúÂêâÂá∂Êñ≠Ë®Ä„ÄÇ'}}</text>
          </view>
        </view>
        
      </view>
      
    </view>

  </view>

  <!-- ÈöêËóèCanvasÁî®‰∫éÊúãÂèãÂúàÊãºÂõæ -->
  <canvas
    id="share-merge-canvas"
    type="2d"
    style="position: fixed; left: -9999px; top: 0; width: 640px; height: 640px;">
  </canvas>
</view>
